<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Gymio</title>

  <meta name="description" content="A gym web application">
  <meta name="author" content="Gymio">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/skeleton.css">
  <link rel="icon" type="image/png" href="images/favicon.png">

  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body>

  <div class="container">
    <div class="row">
      <div class="one-half column" style="margin-top: 15%;margin-bottom:15%">
        <h4>Gymiooo</h4>
        <p>
          Welcome to Gymio. Please enter your user stats.
          If you wish to contribute to the project go to:
          <a href="https://github.com/truongio/gymio-web">https://github.com/truongio/gymio-web</a>
        </p>
        <label for="weight">Your weight</label>
        <input class="u-full-width" type="number" placeholder="Over 9000!!!" id="weight">

        <label for="bench">Bench Press</label>
        <input class="u-full-width" type="number" placeholder="Over 9000!!!" id="bench">

        <label for="deadlift">Deadlift</label>
        <input class="u-full-width" type="number" placeholder="Over 9000!!!" id="deadlift">

        <label for="squat">Squat</label>
        <input class="u-full-width" type="number" placeholder="Over 9000!!!" id="squat">

        <label for="overhead">Overhead Press</label>
        <input class="u-full-width" type="number" placeholder="Over 9000!!!" id="overhead">
        <button onclick="logUserStats()">Submit</button>
        <div class="user-id" id="user-id"></div>
      </div>
    </div>
  </div>

</body>

</html>

<script>

  function logUserStats() {
    let jsonny = {
      "trainingMaxes": {
        "BenchPress": {
          "value": inputData('bench'),
          "unit": "kg"
        },
        "Squat": {
          "value": inputData('squat'),
          "unit": "kg"
        },
        "Deadlift": {
          "value": inputData('deadlift'),
          "unit": "kg"
        },
        "OverheadPress": {
          "value": inputData('overhead'),
          "unit": "kg"
        }
      },
      "bodyWeight": {
        "value": inputData('weight'),
        "unit": "kg"
      }
    }

    function uuidv4() {
      return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>
        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)
      )
    }

    const userId = uuidv4()
    axios.post(`http://35.228.75.253/user-stats/${userId}`, jsonny)
      .then(function (response) {
        document.getElementById('user-id').innerHTML = `<em>User ID is ${userId}</em>`
        console.log(response);
      })
      .catch(function (error) {
        console.log(error);
      })
  }

  function inputData(id) {
    return document.getElementById(id).value || 0
  }
</script>

<style>
.user-id {
  font-size: 0.8em;
  opacity: 0.5;
}
</style>